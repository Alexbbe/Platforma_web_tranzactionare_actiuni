{% extends 'after_login/template.html' %}
{% block title %} Index {% endblock %}

{% block content %}

{{ company }}
<style>
    div.first_culomn{
                display: inline-block;
    }


</style>



<table class="table table-dark">
  <thead>
    <tr>
      <th scope="col">Company</th>
      <th scope="col">Country</th>
      <th scope="col">Current Price</th>
      <th scope="col">Buy</th>
        <th scope="col">Sell</th>
        <th scope="col">Trade</th>
       <th scope="col"></th>
    </tr>
  </thead>
  <tbody>
  {% for company in info %}
    <tr>
      <th scope="row">
        <img src="{{ company.0.logo }} " width="50" height="50">
        <form action="{% url 'company' %}">
        <button class="btn btn-link" name ='company' value="{{ company.0.name }}">{{company.0.ticker}}</button>  {{company.0.name}}
       </form>
      </th>
      <td>{{ company.0.country }}</td>
      <td><div style="color: lawngreen">{{ company.1.c }}$</div></td>
      <td>pass</td>
      <td>pass</td>
      <td>
        <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#exampleModal" name="company" value="{{ company.0.name }}">Trade {{company.0.ticker}}</button>
      </td>
      <td>
        <form action="{% url 'del_company' %}">

        <button class="btn btn-danger" name="company_del" value="{{ company.0.ticker }}">Delete company</button>

        </form>
      </td>
    </tr>

  </tbody>
  {% endfor %}
</table>


 <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#add_company" name="company" value="{{ company.0.name }}">Add company</button>


<div class="modal fade" id="add_company" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Choose the company you want to add</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
            <form autocomplete="off" action="{% url 'add_company' %}">
             <div class="autocomplete" style="width:300px;">
                    <input id="myInput" type="text" name="company" placeholder="Search company...">
             </div>
                       <input type="submit" value="Add company">
              </form>
      </div>
    </div>
  </div>
</div>


<div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="exampleModalLabel">Trade</h5>

        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
      </div>
      <div class="modal-body">
        <form method="post">
        {% csrf_token %}
        {{trade}}
          <input type="submit" value="Trade">
        </form>
      </div>
    </div>
  </div>
</div>


{% endblock %}

{% block footer_content %}


<div style="white-space: nowrap">
 <h6 style="color: ghostwhite">Current account: <div style="color: lawngreen">{{ money }}$</div></h6>
     <h6 style="color: lawngreen" > </h6>
    <h6 style="color: ghostwhite">Totally invested:  <div style="color: lawngreen">{{ invested }}$</div> </h6>

  <h6 style="color: ghostwhite">Profit:  <div style="color: lawngreen">{{ profit }}$</div> </h6>

  <h6 style="color: ghostwhite">Capital: <div style="color: lawngreen">{{ capital }}$</div> </h6>



</div>


{% endblock %}


      <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"
                integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0" crossorigin="anonymous"></script>

